# Introduction to Firestore (at HOTH7)

## Before We Get Started
Make sure you have [Node](https://nodejs.org/) installed, as well as a text
editor of your choice (we will be using 
[Visual Studio Code](https://code.visualstudio.com/))

## Setting Up the Project
Open up your terminal application (Terminal on MacOS, Powershell on Windows) 
and execute the following commands. (Note: the "$" character is not part of
the command).

```
$ npx create-react-app meme-app
$ cd meme-app
$ npm install firebase --save
$ npm start
```
You should see something like this in your browser:
![](images/default_app.png)

Now open the project folder in your text editor. Navigate to the `src` folder 
and replace the code in the following files with the code in the corresponding 
link:

`App.js`: [code](src_base/App.js)

`App.css`: [code](src_base/App.css)

`index.css`: [code](src_base/index.css)

In addition, create two new files in the `src` directory and copy the linked code into them:

`Meme.js`: [code](src_base/Meme.js) 

`Meme.css`: [code](src_base/Meme.css)

Make sure to save all of your changes! Then you should see something that looks
like this:

![](images/base_app.png)

Try adding some memes to the page! Wow, memes are great. But oh no... when we 
refresh the page, all of our precious memes disappear!! :0 :c

In order to make a meme page that actually stores and displays all the memes 
we submitted, we'll need some sort of database. Enter... Firebase!!

## Creating a Firebase Project

To get started, log in to [firebase](https://console.firebase.google.com/), and
you should get a screen that looks like this;
![](images/projects.png)

Click the "add project" button, which should prompt you to enter the project's
name.
![](images/create_project_0.png)
Then hit continue, and you'll be prompted to use Google Analytics. This will
require some additional setup, so I won't be enabling it. However, it is a
pretty useful tool for measuring app usage and user engagement, if that's
something you're interested in.

![](images/create_project_1.png)

## Adding an App to the Project

Now you should see the project overview. Since we're using a web app, let's
click the button to add a web app to the project.

![](images/project_overview.png)

Choose a nickname for your app, and then hit "register app"
![](images/add_app_0.png)

Next, we're going to need to add the firebase configuration to our app. Your screen
should look something like the image below.

![](images/add_app_1.png)

Create a `lib` folder inside the `src` folder, and create a `firebase.js` file
inside of it. Copy the code under the "Your web app's Firebase configuration"
and "Initialize Firebase" comments, and paste it into the `firebase.js` file.
Now modify the file to look like this (the config part should be from the code
you copied, not exactly the same as below!):

``` javascript
import firebase from 'firebase';

const config = {
    apiKey: "AIzaSyBVkHrj182dfk4NAEfwcRPN_DkC_HOOk8Q",
    authDomain: "hoth7-firebase-workshop.firebaseapp.com",
    databaseURL: "https://hoth7-firebase-workshop.firebaseio.com",
    projectId: "hoth7-firebase-workshop",
    storageBucket: "hoth7-firebase-workshop.appspot.com",
    messagingSenderId: "328418075634",
    appId: "1:328418075634:web:2b44d5c432aa54189c016b"
};

firebase.initializeApp(config);

export default firebase;
```
## Adding a Firebase Database
On the left sidebar, click the "database" button, and you should see a screen 
like this:
![](images/database_0.png)

Click create database, and for security rules, we are going to start 
in test mode (although in production, you'll want more stringent security rules).
![](images/database_1.png)

For the Cloud Firestore location, I'm going to choose a server in the US west
region. 
![](images/database_2.png)

## Firebase Databases
Now that we have our database, let's create some sample data for our app to use.
First, let's add a new collection by clicking "start collection".
![](images/add_collection_0.png)

I'm going to name my collection "memes". The name of the collection is what we'll
use to refer to it in our code later. After picking a name, click the "next" button.
![](images/add_collection_1.png)

Now we can add our first document to the "memes" collection. I'm going
to use an autogenerated ID. This document will have two fields, both strings. 
The first will be a field called "name", which I'll set to "Jamie". In addition,
the document will have an "imgURL" field. Here, I'll input a link to [the image
that I want displayed](https://i.redd.it/f322t7u6sih41.jpg). 
![](images/add_document.png)

## Using the Database in the App

